<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="generator" content="Bootply" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Marten - FAQ & Troubleshooting</title>
    <link href="/v3/content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/v3/content/prism.css" rel="stylesheet" type="text/css" />
    <link href="/v3/content/theme.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />

    <link rel="apple-touch-icon" href="/bootstrap/img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/bootstrap/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/bootstrap/img/apple-touch-icon-114x114.png">

    <!-- CSS code from Bootply.com editor -->
    <link href="/v3/content/affix.css" rel="stylesheet" type="text/css" />
</head>

<!-- HTML code from Bootply.com editor -->

<body>
    <a href="https://github.com/jasperfx/marten"><img style="z-index: 5000; position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

    <nav class="navbar navbar-default navbar-fixed-top" role="banner">
        <div class="container">
            <div class="navbar-header">
                <a href="/marten" class="navbar-brand">Marten 3.13.1</a>
            </div>
            <nav class="collapse navbar-collapse" role="navigation">
                <ul class="nav navbar-nav pull-right">
                    <li>
                        <a href="/v3/getting_started">Getting Started</a>
                    </li>
                    <li>
                        <a href="/v3/documentation">Documentation</a>
                    </li>
                    <li>
                        <a href="/v3/migration_guide">Migration Guide</a>
                    </li>
                    <li>
                        <a href="https://gitter.im/jasperfx/marten?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/jasperfx/marten" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a>
                    </li>
                    <li>
                        <a href="https://twitter.com/marten_lib?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @marten_lib</a>
                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                    </li>
                    <li><a href="/v3/documentation/events" title="Marten as Event Store">Previous</a></li>
                <li><a href="/v3/documentation/scenarios" title="Scenarios">Next</a></li>
                </ul>
                <div class="navbar-form navbar-left" role="search">
                    <div class="form-group">
                        <input id="search" type="search" class="form-control" placeholder="Search">
                    </div>
                </div>
            </nav>
        </div>
    </nav>
    <div class="container">
        <nav class="navbar-inverse">
            <ol class="breadcrumb"><li><a href="/v3/">Marten</a></li><li><a href="/v3/documentation">Documentation</a></li><li class="active">FAQ &amp; Troubleshooting</li></ol>
        </nav>
    </div>
    <!--main-->
    <div class="container">
        <div class="row">
            <!--left-->

            <div class="col-md-3" id="leftCol">

                <img src="/v3/content/images/emblem.png" width="80%" align="middle" />
                <br />
                <ul class="nav nav-stacked affix" id="sidebar"></ul>
                <h3 class="no-margin">Next</h3><p><a href="/v3/documentation/scenarios">Scenarios</a></p>
                    <h3 class="no-margin">Previous</h3><a href="/v3/documentation/events">Marten as Event Store</a></p>
                </ul>
            </div><!--/left-->
            <!--right-->
            <div class="col-md-9">
                <h1>FAQ & Troubleshooting <a href="https://github.com/jasperfx/marten/blob/3.13/documentation/documentation/troubleshoot/index.md" class="text-muted small pull-right fa fa-github" style="margin-top: 10px"> Edit on GitHub</a></h1>

                <hr />
                <div id="main-pane">
                    <!--Title:FAQ & Troubleshooting-->
<p><strong>What are the different document sessions?</strong></p>
<table>
<thead>
<tr>
<th>From <code>IDocumentStore</code></th>
<th>Characteristics</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OpenSession</code></td>
<td><strong>Defaults</strong> to session that tracks objects by their identity, <code>DocumentTracking.IdentityOnly</code>, with isolation level of <em>Read Committed</em>.</td>
<td>Reading &amp; writing data. Objects within a session are cached by their identity. Updates to objects are explicitly controlled through session operations (<code>IDocumentSession.Update</code>, <code>IDocumentSession.Store</code>). With the defaults, incurs lower overhead than <code>DirtyTrackedSession</code>.</td>
</tr>
<tr>
<td><code>LightweightSession</code></td>
<td>No change tracking, <code>DocumentTracking.None</code>, with the default isolation level of <em>Read Committed</em>.</td>
<td>Reading &amp; writing data. No caching of objects is done within a session, e.g. repeated loads using the same document identity yield separate objects, each hydrated from the database. In case of updates to such objects, the last object to be stored will overwrite any pending changes from previously stored objects of the same identity. Can incur lower overhead than tracked sessions.</td>
</tr>
<tr>
<td><code>DirtyTrackedSession</code></td>
<td>Track all changes to objects, <code>DocumentTracking.DirtyTracking</code>, with the default isolation level of <em>Read Committed</em>.</td>
<td>Reading &amp; writing data. Tracks all changes to objects loaded through a session. Upon save (<code>IDocumentSession.SaveChanges</code>), Marten updates the changed objects without requiring explicit calls to <code>IDocumentSession.Update</code> or <code>IDocumentSession.Store</code>. Incurs the largest overhead of tracked sessions.</td>
</tr>
<tr>
<td><code>QuerySession</code></td>
<td>No identity mapping with the default isolation level of <em>Read Committed</em>.</td>
<td>Reading data, i.e. no insert or update operations are exposed.</td>
</tr>
</tbody>
</table>
<p><strong>My query throws a <code>NotSupportedException</code> exception. Why? What to do?</strong></p>
<p>Marten needs to translate LINQ queries to SQL in order to execute them against the database. This translation requires explicit support for all the query operators that are used. If your query operation is not covered, Marten will throw a <code>NotSupportedException</code>. In such a case, consider <a href="https://github.com/JasperFx/marten/issues/new">filing a feature request</a>. Lastly, as a mitigation, consider
<a href="/v3/documentation/documents/querying/sql">hand-crafting the required query</a>.</p>
<p><strong>How do I serialize to Camel case?</strong></p>
<p>While it's possible to accommodate any serialization schemes by implementing a custom <code>ISerializer</code>, Marten's built-in serializer (Json.Net) can be set to serialize to Camel case through <code>StoreOptions.UseDefaultSerialization</code>:</p>
<pre><code class="language-csharp">&#xD;&#xA;var store = DocumentStore.For(storeOptions =&gt;&#xD;&#xA;{&#xD;&#xA;    // Change default casing to CamelCase&#xD;&#xA;    storeOptions.UseDefaultSerialization(casing: Casing.CamelCase);&#xD;&#xA;</code></pre> 	
<p><strong>How do I disable PLV8?</strong></p>
<p>If you don't want PLV8 (required for JavaScript transformations) related items in your database schema, you can disable PLV8 altogether by setting <code>StoreOptions.PLV8Enabled</code> to false.</p>
<p><strong>Marten isn't giving me the diagnostic data that I need</strong></p>
<p>If you cannot obtain the desired diagnostic data through Marten's <a href="/v3/documentation/documents/diagnostics">diagnostics</a>, consider using the <a href="https://www.npgsql.org/doc/logging.html">Npgsql logging facilities</a>, by hooking into <code>NpgsqlLogManager.Provider</code>, or by using the <a href="https://www.npgsql.org/doc/performance.html">performance counters exposed by Npgsql</a>.</p>
<p>Lastly, if you feel that exposing the data should be the responsibility of Marten, consider <a href="https://github.com/JasperFx/marten/issues/new">filing a feature request</a>.</p>
<p><strong>Full text search gives me the error <code>function to_tsvector(unknown, jsonb) does not exist</code></strong></p>
<p>Ensure, that you are running PostgreSQL 10 or higher that support full text searching JSON and JSONB.</p>

                </div>
                <hr />
                <nav class="related-links">
                    <span>
                        <strong>Previous: </strong><a href="/v3/documentation/events">Marten as Event Store</a>
                    </span>
                    <span class="pull-right">
                        <strong>Next: </strong><a href="/v3/documentation/scenarios">Scenarios</a>
                    </span>
                </nav>
            </div><!--/right-->
        </div><!--/row-->
    </div><!--/container-->
    <footer>
        <ul>
            <li>
                <a href="https://dotnetfoundation.org">
                    <img class="dot-net-foundation-logo" src="https://raw.githubusercontent.com/dotnet/swag/master/logo/dotnetfoundation_v4.png" alt="Supported by the .NET Foundation" />
                </a>
                Supported by the <a href="https://dotnetfoundation.org">.NET Foundation</a>
            </li>
        </ul>
    </footer>
</body>

<foot>
    <script type='text/javascript' src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type='text/javascript' src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/v3/content/prism.js"></script>
    <script type="text/javascript" src="/v3/content/sidebar.js"></script>
    <script type="text/javascript" src="/v3/content/affix.js"></script>

    <script>
        $('#search').keyup(function (e) {
            if (e.keyCode == 13) {
                var search = $('#search').val();

                var url = 'https://www.google.com/#q=site:jasperfx.github.io ' + search;
                url = encodeURI(url);

                //alert(url);

                window.location.href = url;

                e.stopPropagation();
                if (e.cancelBubble != null) e.cancelBubble = true;
                return false;
            }

        });
    </script>
</foot>
</html>
